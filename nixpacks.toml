# Nixpacks configuration for Railway deployment
# This tells Railway to build the backend Python application

[phases.setup]
# Python 3.11 with system dependencies for OpenCV, TensorFlow, and PyTorch
nixPkgs = ["python311"]
aptPkgs = ["libgl1", "libglib2.0-0", "libsm6", "libxext6", "libxrender-dev", "libgomp1", "libgthread-2.0-0"]

[phases.install]
cmds = ["pip install --upgrade pip", "pip install -r backend/requirements.txt"]

[phases.build]
cmds = []

[start]
cmd = "cd backend && gunicorn app:app --bind 0.0.0.0:$PORT"
